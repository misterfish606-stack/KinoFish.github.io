<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Хороший, плохой, злой (1966)</title>

<style>
body{
margin:0;
font-family:'Arial Black',sans-serif;
background:#1b0000;
color:#eee;
overflow-x:hidden;
}

.wrapper{
width:70%;
margin:0 auto;
padding-bottom:60px;
}


  body::after{
content:"";
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
pointer-events:none;
z-index:999;

background-image:
radial-gradient(2px 2px at 20px 30px, rgba(255,220,180,0.4), transparent),
radial-gradient(2px 2px at 100px 80px, rgba(255,220,180,0.4), transparent),
radial-gradient(2px 2px at 200px 150px, rgba(255,220,180,0.4), transparent),
radial-gradient(2px 2px at 300px 50px, rgba(255,220,180,0.4), transparent);

background-repeat:repeat;
background-size:400px 400px;

animation:dust 20s linear infinite;
}

@keyframes dust{
from{transform:translateY(0);}
to{transform:translateY(-400px);}
}

/* Слайдер */
.slider{
position:relative;
margin-top:20px;
overflow:hidden;
border-radius:10px;
height:200px;
background:#220000;
padding:10px;
box-shadow:0 0 15px #900;
}
.slides{display:flex;transition:0.5s;}
.slides img{
width:300px;
margin-right:15px;
border-radius:5px;
cursor:pointer;
transition:0.3s;
}
.slides img:hover{transform:scale(1.05);}
.prev,.next{
position:absolute;
top:50%;
transform:translateY(-50%);
background:#330000;
border:none;
color:white;
font-size:20px;
padding:8px;
cursor:pointer;
border-radius:5px;
}
.prev{left:5px;}
.next{right:5px;}

/* Инфо */
.top{
display:flex;
gap:30px;
margin-top:30px;
}
.poster img{
width:250px;
border-radius:10px;
box-shadow:0 0 20px #900;
}
.description{
margin-top:30px;
line-height:1.6;
padding:15px;
background:#220000;
border-radius:10px;
box-shadow:0 0 15px #900;
}

/* Видео */
.video-container{
margin-top:30px;
}
.video-container iframe{
width:100%;
height:500px;
border-radius:10px;
box-shadow:0 0 25px #900;
}

/* Кнопки */
button{
padding:6px 10px;
background:#330000;
color:white;
border:1px solid #aa0000;
border-radius:5px;
cursor:pointer;
margin-top:5px;
}
button:hover{background:#660000;}

/* Рейтинг */
.star{
font-size:24px;
color:#550000;
cursor:pointer;
}
.star.selected{color:gold;}
#avgRating{
font-size:18px;
color:gold;
margin-top:20px;
}

/* Комментарии */
.comment{
background:#140000;
padding:10px;
margin-top:15px;
border-left:4px solid #aa0000;
border-radius:5px;
}
</style>
</head>

<body>
<div class="wrapper">

<h2>Хороший, плохой, злой (1966)</h2>

<!-- Слайдер -->
<div class="slider">
<div class="slides" id="slides">
<img src="https://i.imgur.com/XKxOxxg.jpg">
<img src="https://i.imgur.com/XKxOxxg.jpg">
<img src="https://i.imgur.com/XKxOxxg.jpg">
</div>
<button class="prev" onclick="moveSlide(-1)">❮</button>
<button class="next" onclick="moveSlide(1)">❯</button>
</div>

<!-- Инфо -->
<div class="top">
<div class="poster">
<img src="https://i.imgur.com/XKxOxxg.jpg">
</div>
<div>
<p><b>Оригинальное название:</b> The Good, the Bad and the Ugly</p>
<p><b>Страны:</b> Италия, Испания</p>
<p><b>Жанр:</b> Вестерн / Экшн</p>
<p><b>Рейтинг КиноПоиск:</b> 8.6</p>
<p><b>Рейтинг IMDb:</b> 8.8</p>
<p><b>Режиссёр:</b> Серджо Леоне</p>
<p><b>Актёры:</b> Клинт Иствуд, Ли Ван Клиф, Илай Уоллак</p>
</div>
</div>

<div class="description">
История трёх охотников за сокровищами во времена Гражданской войны в США.
</div>

<!-- Видео -->
<div class="video-container">
<iframe id="movie"
src="https://www.youtube.com/embed/0Bwxz16-T04?enablejsapi=1"
allowfullscreen></iframe>
</div>

<!-- Рейтинг -->
<div id="avgRating">Средний рейтинг: ⭐0.0</div>
<div>
<span class="star" data-value="1">★</span>
<span class="star" data-value="2">★</span>
<span class="star" data-value="3">★</span>
<span class="star" data-value="4">★</span>
<span class="star" data-value="5">★</span>
<span id="votes">(0 голосов)</span>
</div>

<!-- Авторизация -->
<h3>Вход</h3>
<input type="text" id="loginName" placeholder="Введите имя">
<button onclick="login()">Войти</button>
<p id="currentUser"></p>

<!-- Комментарии -->
<h3>Комментарии</h3>
<input type="text" id="commentInput" placeholder="Ваш комментарий">
<button onclick="addComment()">Отправить</button>
<div id="commentList"></div>

</div>

<script>

/* Слайдер */
let index=0;
function moveSlide(step){
let slides=document.getElementById("slides");
let total=slides.children.length;
let slideWidth=slides.children[0].offsetWidth+15;
index+=step;
if(index<0) index=total-1;
if(index>=total) index=0;
slides.style.transform="translateX(-"+index*slideWidth+"px)";
}

/* Авторизация */
let currentUser=localStorage.getItem("currentUser")||null;
function login(){
let name=document.getElementById("loginName").value.trim();
if(!name)return;
localStorage.setItem("currentUser",name);
currentUser=name;
document.getElementById("currentUser").innerText="Вы вошли как: "+name;
}
if(currentUser){
document.getElementById("currentUser").innerText="Вы вошли как: "+currentUser;
}

/* Рейтинг */
let stars=document.querySelectorAll('.star');
function loadRating(){
let totalVotes=parseInt(localStorage.getItem('totalVotes'))||0;
let totalScore=parseInt(localStorage.getItem('totalScore'))||0;
let avg=totalVotes?(totalScore/totalVotes).toFixed(1):"0.0";
document.getElementById('votes').innerText=`(${totalVotes} голосов)`;
document.getElementById('avgRating').innerText=`Средний рейтинг: ⭐${avg}`;
}
stars.forEach((star)=>{
star.addEventListener('click',()=>{
if(localStorage.getItem("voted")) return;
let val=parseInt(star.getAttribute('data-value'));
let totalVotes=parseInt(localStorage.getItem('totalVotes'))||0;
let totalScore=parseInt(localStorage.getItem('totalScore'))||0;
totalVotes++;
totalScore+=val;
localStorage.setItem('totalVotes',totalVotes);
localStorage.setItem('totalScore',totalScore);
localStorage.setItem('voted',true);
loadRating();
});
});
loadRating();

function like(id){
let key="liked_"+id;
if(localStorage.getItem(key)) return;

let comment = comments.find(c => c.id === id);
if(!comment) return;

comment.likes++;
localStorage.setItem(key,true);
saveAndRender();
}

function dislike(id){
let key="disliked_"+id;
if(localStorage.getItem(key)) return;

let comment = comments.find(c => c.id === id);
if(!comment) return;

comment.dislikes++;
localStorage.setItem(key,true);
saveAndRender();
}


function addComment(){
if(!currentUser){alert("Сначала войдите!");return;}

let text=document.getElementById("commentInput").value.trim();
if(!text)return;

comments.push({
id: Date.now(),
name:currentUser,
text,
likes:0,
dislikes:0
});

saveAndRender();
document.getElementById("commentInput").value="";
}


function like(i){
let key="liked_"+i;
if(localStorage.getItem(key)) return;
comments[i].likes++;
localStorage.setItem(key,true);
saveAndRender();
}

function dislike(i){
let key="disliked_"+i;
if(localStorage.getItem(key)) return;
comments[i].dislikes++;
localStorage.setItem(key,true);
saveAndRender();
}

function saveAndRender(){
localStorage.setItem("cinemaComments",JSON.stringify(comments));
renderComments();
}
renderComments();

</script>
</body>
</html>
