<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Хороший, Плохой, Злой</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Постер -->
<img src="poster.jpg" class="poster">

<!-- Видео -->
<video class="player" src="movie.mp4"></video>

<!-- Рейтинг -->
<div class="rating">
    <h2>Оцените фильм:</h2>
    <div id="stars">
        <span data-value="1">★</span>
        <span data-value="2">★</span>
        <span data-value="3">★</span>
        <span data-value="4">★</span>
        <span data-value="5">★</span>
    </div>
    <p>Средняя оценка: <span id="average">0</span></p>
</div>

<!-- Комментарии -->
<div class="comments">
    <h2>Комментарии</h2>
    <input type="text" id="username" placeholder="Ваше имя">
    <textarea id="commentInput" placeholder="Ваш комментарий"></textarea>
    <button onclick="addComment()">Отправить</button>
    <div id="commentList"></div>
</div>

<script src="script.js"></script>
</body>
</html>
body {
    background: black;
    color: white;
    font-family: Arial;
}

/* Постер /
.poster {
    position: fixed;
    top: 10px;
    left: 10px;
    width: 200px;
}

/ Видео /
.player {
    display: block;
    margin: 100px auto;
    width: 70%;
}

/ Звёзды /
#stars span {
    font-size: 40px;
    cursor: pointer;
    color: gray;
}

#stars span.active {
    color: gold;
}

/ Комментарии */
.comments {
    width: 60%;
    margin: auto;
}

textarea {
    width: 100%;
    height: 80px;
}
// ======= Рейтинг =======
let stars = document.querySelectorAll("#stars span");
let averageDisplay = document.getElementById("average");

let ratings = JSON.parse(localStorage.getItem("ratings")) || [];

function updateAverage() {
    if (ratings.length === 0) {
        averageDisplay.textContent = "0";
        return;
    }
    let sum = ratings.reduce((a, b) => a + b, 0);
    averageDisplay.textContent = (sum / ratings.length).toFixed(1);
}

stars.forEach(star => {
    star.addEventListener("click", function() {
        let value = parseInt(this.dataset.value);
        ratings.push(value);
        localStorage.setItem("ratings", JSON.stringify(ratings));
        updateAverage();
    });
});

updateAverage();

// ======= Комментарии =======
let commentList = document.getElementById("commentList");
let comments = JSON.parse(localStorage.getItem("comments")) || [];

function renderComments() {
    commentList.innerHTML = "";
    comments.forEach(c => {
        let div = document.createElement("div");
        div.innerHTML = "<b>" + c.name + ":</b> " + c.text;
        commentList.appendChild(div);
    });
}

function addComment() {
    let name = document.getElementById("username").value;
    let text = document.getElementById("commentInput").value;

    if (name === "" || text === "") return;

    comments.push({ name, text });
    localStorage.setItem("comments", JSON.stringify(comments));

    document.getElementById("commentInput").value = "";
    renderComments();
}

renderComments();

// ======= Убираем контролы видео =======
let video = document.querySelector(".player");
video.controls = false;
video.removeAttribute("controls");
